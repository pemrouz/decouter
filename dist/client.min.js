"use strict";function l(e){return function(t){if(!window.console||!console.log.apply)return t;var n=Array.prototype.slice.call(arguments,0),r="[log]["+(new Date).toISOString()+"]"+e;return n.unshift(r),t}}function segment(e){var t=e.split("/").filter(Boolean);return{cur:t.shift(),remainder:"/"+t.join("/")}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},client=!0,log=l("[router]"),go=function(e){return window.event&&window.event.preventDefault(),history.pushState({},"",e),window.dispatchEvent(new CustomEvent("change")),e},router=function(e){function t(t,n,r){var o=t.url,i=resolve(e)(t),u=i.url;return o!==u&&log("router redirecting",o,u),location.params=i.params,o!==u?(go(u),i):i}return t({url:location.pathname})},resolve=function e(t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.url,o={},i=next(n,o,r,t);return"../"==i||".."==i?e(t)(n,"/"+r.split("/").filter(Boolean).slice(0,-1).join("/")):!!i&&(!0!==i?e(t)(n,i):{url:r,params:o})}},next=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=arguments[3],i=arguments[4],u=segment(r),a=u.cur,l=u.remainder;return"string"==typeof o||"boolean"==typeof o?o:"function"==typeof o&&void 0!==i?e(t,n,r,o(t)):"function"==typeof o?e(t,n,r,o(i,t)):a in o?e(t,n,l,o[a]):!a&&o[":"]?e(t,n,l,o[":"]):(variables(o).find(function(r){return!!(r.value=e(t,n,l,o[r.key],a||!1))&&(!0===r.value&&r.name&&(n[r.name]=a),!0)})||{}).value},variables=function(e){return Object.keys("object"==(void 0===e?"undefined":_typeof(e))||"function"==typeof e?e:{}).filter(function(e){return":"==_slicedToArray(e,1)[0]}).map(function(e){return{key:e,name:e.slice(1)}})},draw=window.app&&window.app.draw||document.draw||String;window.go=go,window.router=router,window.router.resolve=resolve,window.addEventListener("popstate",function(e){return window.dispatchEvent(new CustomEvent("change"))}),window.addEventListener("change",function(e){return e.target==window&&draw()}),document.addEventListener("click",function(e){var t=e.path?e.path.shift():e.target;t.matches("a[href]:not([href^=javascript]):not(.bypass)")&&t.origin==location.origin&&(e.preventDefault(),go(t.href))}),exports.router=router,exports.resolve=resolve;