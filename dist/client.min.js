"use strict";function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function l(e){return function(n){if(!window.console||!console.log.apply)return n;var t=Array.prototype.slice.call(arguments,0),r="[log]["+(new Date).toISOString()+"]"+e;return t.unshift(r),n}}function segment(e){var n=e.split("/").filter(Boolean);return{cur:n.shift(),remainder:"/"+n.join("/")}}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(exports,"__esModule",{value:!0});var client=!0,log=l("[router]"),go=function(e){return window.event&&window.event.preventDefault(),history.pushState({},"",e),window.dispatchEvent(new CustomEvent("change")),e},router=function(e){function n(n,t,r){var o=n.url,i=resolve(e)(n),u=i.url;return o!==u&&log("router redirecting",o,u),client&&(location.params=i.params),client&&o!==u?(go(u),i):client||o===u?client?i:r():t.redirect(u)}return client?n({url:location.pathname}):n},resolve=function e(n){return function(t){var r=arguments.length<=1||void 0===arguments[1]?t.url:arguments[1],o={},i=next(t,o,r,n);return"../"==i||".."==i?e(n)(t,"/"+r.split("/").filter(Boolean).slice(0,-1).join("/")):i?i!==!0?e(n)(t,i):{url:r,params:o}:!1}},next=function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2],o=arguments[3],i=arguments[4],u=segment(r),a=u.cur,l=u.remainder;return"string"==typeof o||"boolean"==typeof o?o:"function"==typeof o&&"undefined"!=typeof i?n(e,t,r,o(e)):"function"==typeof o?n(e,t,r,o(i,e)):a in o?n(e,t,l,o[a]):!a&&o[":"]?n(e,t,l,o[":"]):(variables(o).find(function(r){return(r.value=n(e,t,l,o[r.key],a||!1))?(r.value===!0&&r.name&&(t[r.name]=a),!0):!1})||{}).value},variables=function(e){return Object.keys("object"==("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e?e:{}).filter(function(e){var n=_slicedToArray(e,1),t=n[0];return":"==t}).map(function(e){return{key:e,name:e.slice(1)}})};client&&!function(){var e=window.app&&window.app.draw||document.draw||String;window.go=go,window.router=router,window.router.resolve=resolve,window.addEventListener("popstate",function(e){return window.dispatchEvent(new CustomEvent("change"))}),window.addEventListener("change",function(n){return n.target==window&&e()}),document.addEventListener("click",function(e){var n=e.path?e.path.shift():e.target;n.matches("a[href]:not([href^=javascript]):not(.bypass)")&&n.origin==location.origin&&(e.preventDefault(),go(n.href))})}(),exports.router=router,exports.resolve=resolve;